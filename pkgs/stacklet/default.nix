{ lib, rustPlatform, fetchFromGitHub, ncurses }:

rustPlatform.buildRustPackage rec {
  pname = "stacklet";
  version = "1.0.0";

  src = fetchFromGitHub {
    owner = "ggemre";
    repo = pname;
    rev = version;
    sha256 = "1jkc1na19wy5sicnj1w9cd8y55245dw7bvwmz1p9f43fjp5zv462";
  };

  cargoSha256 = "sha256-jUn6mrTemaoa70Hac67UMlMPLVQpUvEu+vFCO+QD7mE=";
  buildInputs = [ ncurses ];

  meta = with lib; {
    description = "Generate custom applets and menus";
    longDescription = ''
      Stacklet is a powerful and versatile command-line tool written in Rust, designed to provide users with a seamless and interactive experience for managing various tasks and configurations in the terminal environment.
      The app features a scriptable architecture, allowing users to write scripts or provide instructions to automate tasks and customize the app's behavior.
      Users can navigate through custom applets and menus generated by the app, which dynamically adapt based on user input and external scripts/executables output.
    '';
    homepage = https://github.com/ggemre/stacklet;
    license = licenses.mit;
    platforms = platforms.all;
  };
}
